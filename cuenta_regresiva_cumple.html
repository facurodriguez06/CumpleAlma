<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Cumple Amor</title>
  <style>
    :root{
      --bg-blur: 8px;
      --card-bg: rgba(0,0,0,.35);
      --text: #ffffff;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      overflow:hidden;
      background:#000;
    }

    /* Capa de imagen de fondo SIN deformación */
    .bg-img{
      position:fixed; inset:0; width:100%; height:100%;
      object-fit:cover;           /* <- evita deformación */
      object-position:center;
      z-index:-3;
      filter: saturate(1.05) contrast(1.05) brightness(.9);
    }

    /* Capa de gradiente + blur suave por encima de la imagen */
    .bg{
      position:fixed; inset:0; z-index:-2; pointer-events:none;
      background:
        radial-gradient(1200px 800px at 50% 50%, rgba(0,0,0,.25), rgba(0,0,0,.7));
    }
    .bg::after{
      content:"";
      position:absolute; inset:0;
      backdrop-filter: blur(var(--bg-blur));
      -webkit-backdrop-filter: blur(var(--bg-blur));
    }

    /* Estrellitas sutiles */
    .stars{position:fixed;inset:0;z-index:-1;pointer-events:none;opacity:.5}
    .star{position:absolute;width:2px;height:2px;background:#fff;border-radius:50%;animation:twinkle 4s infinite ease-in-out}
    @keyframes twinkle{0%,100%{opacity:.2; transform:scale(1)} 50%{opacity:.9; transform:scale(1.8)}}

    .wrap{min-height:100%;display:grid;place-items:center;padding: clamp(16px, 4vw, 40px);}
    .card{
      width:min(960px, 100%);
      background: var(--card-bg);
      border: 1px solid rgba(255,255,255,.15);
      border-radius: 24px;
      box-shadow: var(--shadow);
      padding: clamp(20px, 3vw, 36px);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }

    h1{
      font-weight:800;
      font-size: clamp(28px, 4.5vw, 48px);
      margin:0 0 8px 0;
      text-align:center;
    }

    .timer{
      display:grid;
      grid-template-columns: repeat(4, minmax(0,1fr));
      gap: clamp(10px, 2vw, 18px);
      margin: 14px 0 10px;
    }
    .cell{
      padding: clamp(14px, 2.5vw, 22px);
      border-radius: 18px;
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.15);
      text-align:center;
    }
    .num{
      font-size: clamp(28px, 6vw, 64px);
      font-weight: 800;
      font-variant-numeric: tabular-nums lining-nums;
      text-shadow: 0 4px 16px rgba(0,0,0,.35);
      line-height:1;
    }
    .lab{
      margin-top:6px;
      font-size: clamp(11px,1.8vw,14px);
      letter-spacing: .12em;
      text-transform: uppercase;
      opacity:.9;
    }

    .footer{text-align:center; opacity:.85; font-size:12px; margin-top:14px}

    /* Estado de cumpleaños – glass card estético (sin naranja) */
    .birthday{
      text-align:center;
      padding: clamp(18px, 4vw, 32px);
      border-radius: 16px;
      background: rgba(0,0,0,.28);              /* transparente sutil */
      border: 1px solid rgba(255,255,255,.25);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 12px 40px rgba(0,0,0,.35);
      animation: pop .6s ease-out;
    }
    .birthday h2{margin:0 0 6px 0; font-size: clamp(28px,5.5vw,56px); line-height:1.1}
    .birthday p{margin:0; font-size: clamp(14px,2.4vw,18px); opacity:.95}
    @keyframes pop{0%{transform:scale(.9);opacity:0}100%{transform:scale(1);opacity:1}}

    /* Canvas confetti */
    canvas#confetti{position:fixed; inset:0; pointer-events:none; z-index: 10;}

    /* Responsive */
    @media (max-width: 680px){
      .timer{ grid-template-columns: repeat(2, minmax(0,1fr)); }
    }

    /* Accesibilidad: si el usuario prefiere menos motion, reducimos animaciones */
    @media (prefers-reduced-motion: reduce){
      .star{ animation: none }
    }

    .sub{
      text-align:center;
      font-weight:700;
      font-size: clamp(18px, 3.6vw, 28px);
      margin: 4px 0 12px;
      opacity:.95;
    }
   
  </style>
</head>
<body>
  <!-- Imagen de fondo sin deformación -->
  <img id="bgImg" class="bg-img" alt="">
  <div class="bg" aria-hidden="true"></div>
  <div class="stars" id="stars" aria-hidden="true"></div>
  <canvas id="confetti" aria-hidden="true"></canvas>

  <div class="wrap">
    <div class="card" id="card">
      <h1>10 de Septiembre de 2025</h1>
     <p class="sub">23 años :)</p>

      <div id="countdown" role="timer" aria-live="polite" aria-atomic="true">
        <div class="timer">
          <div class="cell"><div class="num" id="d">–</div><div class="lab">Días</div></div>
          <div class="cell"><div class="num" id="h">–</div><div class="lab">Horas</div></div>
          <div class="cell"><div class="num" id="m">–</div><div class="lab">Minutos</div></div>
          <div class="cell"><div class="num" id="s">–</div><div class="lab">Segundos</div></div>
        </div>
      </div>

      <div class="footer">Hecho para el amor de mi vida</div>
    </div>
  </div>

<script>
/* ===== Configuración ===== */
const targetYear = 2025;
const targetMonthIndex = 8; // septiembre (0=enero)
const targetDay = 10;
const targetHour = 0;
const targetMin  = 0;
const targetSec  = 0;

/* Cambiá este valor por tu archivo (misma carpeta) o por un data URL base64 */
const BACKGROUND_SRC = "fondo.png";

/* ===== Setup ===== */
const TARGET = new Date(targetYear, targetMonthIndex, targetDay, targetHour, targetMin, targetSec);
const $ = (id) => document.getElementById(id);
const bgImg = $("bgImg");
const stars = $("stars");
const dEl = $("d"), hEl = $("h"), mEl = $("m"), sEl = $("s");
const countdownEl = $("countdown");
const confettiCanvas = $("confetti");
const ctx = confettiCanvas.getContext("2d");

/* Fondo sin deformación */
function setBackground(src){
  if(!src) return;
  bgImg.src = src;         // object-fit: cover evita estirar/achatar
}
setBackground(BACKGROUND_SRC);

/* Estrellitas decorativas */
function spawnStars(n=60){
  for(let i=0;i<n;i++){
    const s = document.createElement("div");
    s.className = "star";
    s.style.left = Math.random()*100 + "%";
    s.style.top  = Math.random()*100 + "%";
    s.style.animationDelay = (Math.random()*4).toFixed(2) + "s";
    s.style.opacity = (0.3 + Math.random()*0.7).toFixed(2);
    stars.appendChild(s);
  }
}
spawnStars(80);

/* Contador */
function updateCountdown(){
  const now = new Date();
  const diff = +TARGET - +now;

  if (diff <= 0){
    showBirthday();
    return;
  }
  const sec = Math.floor(diff / 1000);
  const days = Math.floor(sec / 86400);
  const hours = Math.floor((sec % 86400) / 3600);
  const mins = Math.floor((sec % 3600) / 60);
  const secs = sec % 60;

  dEl.textContent = String(days);
  hEl.textContent = String(hours).padStart(2,"0");
  mEl.textContent = String(mins).padStart(2,"0");
  sEl.textContent = String(secs).padStart(2,"0");

  // tick alineado al segundo
  const delay = 1000 - (now % 1000);
  setTimeout(updateCountdown, delay);
}

/* Estado de cumpleaños (glass aesthetic) */
let confettiActive = false;
function showBirthday(){
  if(confettiActive) return;
  confettiActive = true;

  countdownEl.innerHTML = `
    <div class="birthday" role="status" aria-live="assertive">
      <h2>¡Feliz cumpleaños, Amor ❤️!</h2>
      <p>Que tu día brille tanto como tu sonrisa.</p>
    </div>`;

  startConfetti(10_000);
}

/* Confetti */
let confettiPieces = [];
let confettiStartTime = 0;
function resizeCanvas(){
  confettiCanvas.width = window.innerWidth;
  confettiCanvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

function startConfetti(duration=8000){
  confettiPieces = [];
  const colors = ["#ffffff","#e1e1e1","#ffd1e8","#c9eaff","#ccffd7"]; // paleta suave
  const count = Math.min(300, Math.floor(window.innerWidth/4));
  for(let i=0;i<count;i++){
    confettiPieces.push({
      x: Math.random()*confettiCanvas.width,
      y: -10 - Math.random()*confettiCanvas.height,
      r: 2 + Math.random()*4,
      c: colors[Math.floor(Math.random()*colors.length)],
      v: 2 + Math.random()*4,
      w: -2 + Math.random()*4,
      a: Math.random()*Math.PI*2
    });
  }
  confettiStartTime = performance.now();
  requestAnimationFrame(function raf(t){ drawConfetti(t, duration, raf); });
}

function drawConfetti(t, duration, raf){
  const elapsed = t - confettiStartTime;
  ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
  confettiPieces.forEach(p=>{
    p.y += p.v;
    p.x += p.w * Math.sin(p.a += 0.02);
    ctx.fillStyle = p.c;
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    ctx.fill();
  });
  if (elapsed < duration){
    requestAnimationFrame(raf);
  }
}

/* Iniciar */
updateCountdown();
</script>
</body>
</html>
